{% extends 'clinic/base.html' %}

{% block head %}
    <meta name="theme-color" content="#1e272e" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#1e272e" media="(prefers-color-scheme: light)">
    <style>{% include "clinic/css/clinic.css" %}</style>
{% endblock %}

{% block base_content %}
<!-- PAGE MARKUP -->
<div id="tab-box">
    <nav id="sidebar" aria-expanded="true">
        <ul>
            {% block navigation %}
            {% endblock %}
            <hr>
            <li title="Connect your hospital" role="button" dialog="authorisation">
                <span class="icon"><img src="{{ 'icons/colour_globe.svg' | static_base64 }}"></span>
                {% if session['tenant'] %}
                <span class="left">Connected</span>
                <span class="right">ðŸŸ¢</span>
                {% else %}
                <span class="left">Connect</span>
                <span class="right">ðŸ”´</span>
                {% endif %}
            </li>
            {% if session['tenant'] %}
            <li title="Export to REDCap" role="button" dialog="redcap">
                <span class="icon"><img src="{{ 'icons/colour_cap.svg' | static_base64 }}"></span>
                <span class="left">REDCap</span>
            </li>
            {% endif %}
            <li title="Shortcuts" role="button" id="shortcuts-button">
                <span class="icon"><img src="{{ 'icons/colour_fast_forward.svg' | static_base64 }}"></span>
                <span class="left">Shortcuts</span>
            </li>
            <!-- <li title="Search (âŒ˜K)" role="button" id="quick-find-button">
                <span class="icon"><img src="{{ 'icons/colour_search.svg' | static_base64 }}"></span>
                <span class="left">Search</span>
                <span class="right">âŒ˜K</span>
            </li> -->

            <hr>
            <!-- <li id="copy-all" title="Print Note" role="button">
                <span class="icon"><img src="{{ 'icons/colour_copy.svg' | static_base64 }}"></span>
                <span class="left">Print Note</span>
            </li> -->
            <li id="copy-all" title="Copy Note" role="button">
                <span class="icon"><img src="{{ 'icons/colour_copy.svg' | static_base64 }}"></span>
                <span class="left">Copy Note</span>
            </li>
            <li id="download" title="Download" role="button">
                <span class="icon"><img src="{{ 'icons/colour_arrow_down_circle.svg' | static_base64 }}"></span>
                <span class="left">Download</span>
            </li>
            <li id="reset" title="Reset" role="button">
                <span class="icon"><img src="{{ 'icons/colour_zap.svg' | static_base64 }}"></span>
                <span class="left">Reset</span>
            </li>


            <!-- <a class="invisible-link" target="_blank" href="https://github.com/samnunn/periscope">
                <li title="Link to this project's source code" role="button">
                    <span class="icon"><img src="{{ 'icons/github_mark.svg' | static_base64 }}"></span>
                    <span class="left">Source Code</span>
                </li>
            </a> -->
            <a class="invisible-link" href="mailto:admin@periscope.net.au?subject=Bug%20Report%20for%20Periscope">
                <li title="Report a Bug" role="button">
                    <span class="icon"><img src="{{ 'icons/colour_bug.svg' | static_base64 }}"></span>
                    <span class="left">Report a Bug</span>
                </li>
            </a>
            <hr>
            <li title="Toggle sidebar" role="button" id="sidebar-toggle">
                <span class="icon"><img src="{{ 'icons/colour_sidebar.svg' | static_base64 }}"></span>
                <span class="left">Close Sidebar</span>
            </li>
        </ul>
    </nav>
    <main id="tab-display">
        {% block inputs %}
        {% endblock %}
    </main>
</div>
<!-- DIAGNOSES -->
<div id="diagnosis-templates">
    {{ all_clinic_diagnoses() | safe }}
</div>

<!-- TOASTS -->
{% include 'clinic/components/toasts.html' %}

<!-- DIALOGS -->
{% include 'clinic/components/quick-find.html' %}
{% include 'clinic/components/shortcuts.html' %}
{% include 'clinic/components/modal-tenant-connect.html' %}

{% if session['tenant'] %}
{% include 'clinic/components/modal-redcap.html' %}
{% endif %}

<!-- SCRIPTS -->
<script type="module">{{ 'js/sidebar.js' | static_include | safe }}</script>
<script type="module">{{ 'js/beagle-mainthread.js' | static_include | safe }}</script>
<script type="module">{{ "js/data-persistence.js" | static_include | safe }}</script>
<script type="module">{{ "js/draggable-list.js" | static_include | safe }}</script>
<script type="module">{{ "js/navigable-list.js" | static_include | safe }}</script>
<script type="module">{{ "js/text-editing.js" | static_include | safe }}</script>
<script type="module">{{ "js/citations.js" | static_include | safe }}</script>
<script type="module">{{ "js/templating.js" | static_include | safe }}</script>
<script type="module">{{ "js/scrollspy.js" | static_include | safe }}</script>
<script type="module">{{ "js/calculators.js" | static_include | safe }}</script>
<script type="module" src="/app/static/js/historian.js"></script>
<script type="module">{{ "js/clinic-inputs.js" | static_include | safe }}</script>
<script>{{ "js/fuzzysort.min.js" | static_include | safe }}</script>
<script>{{ "js/showdown.min.js" | static_include | safe }}</script>
<script type="module">{{ "js/clinic.js" | static_include | safe }}</script>

{% endblock %}